#!/usr/bin/env bash


main() {
    yabai -m window --focus prev \
        || yabai -m window --focus "$( \
        (yabai -m query --spaces --display prev || yabai -m query --spaces --display last) \
        | jq -re '.[] | select(.visible == 1)."last-window"')" \
        || yabai -m display --focus prev \
        || yabai -m display --focus last
}

main "${@}" 2>/dev/null
