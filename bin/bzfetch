#!/usr/local/bin/zsh

function grab-latest-folder() {
    userserver=${1:-mcdodyla@falcon1}
    ssh -qn $userserver 'find /projects/bison/git/* -mindepth 0 -maxdepth 0 -type d -printf "%T@\t%f\n"' |
        sort -t$'\t' -r -nk1,2 |
        sed -n 1p |
        cut -f2-
}

function build-remote-path() {
    readonly doi=${1:?"Recent Bison run folder must be specified (e.g. bison_20190826)"}
    readonly folder=${2:?"Assessment case of interest must be specified (e.g. 'HBEP')"}

    print -P "$doi" "$folder" |
        awk '{print "/projects/bison/git/"$1"/assessment/LWR/validation/"$2"/*"}'    

}

function path-replace() {
    echo "${$1/$2/$3}"

}

function build-local-path() {
    readonly rp=${1:?"A remote path must be specified"}
    readonly ogpath="/projects/bison/git/$rp"
    readonly newpath="/Users/$USER/Documents/projects/bison"
    path-replace $rp $ogpath $newpath
}

grab-latest-folder

build-remote-path 'bison_20190826' 'HBEP'

build-local-path '/projects/bison/git/bison_20190826/assessment/LWR/validation/HBEP/analysis/BK370/BK370_out.csv'




































