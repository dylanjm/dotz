#!/usr/bin/env bash

readonly PROGNAME="$(basename "${0}")"
readonly PROGDIR="$(greadlink -m "$(dirname "${0}")")"
readonly ARGS=("${@}")

readonly NORMAL='\033[0m'
readonly RED='\033[1;31m'
readonly GREEN='\033[1;32m'
readonly BLUE='\033[1;34m'
readonly YELLOW='\033[1;33m'

yellow() { echo "${YELLOW}$*${NORMAL}"; }
green() { echo "${GREEN}$*${NORMAL}"; }
blue() { echo "${BLUE}$*${NORMAL}"; }
red() { echo "${RED}$*${NORMAL}"; }
magenta() { echo "${MAGENTA}$*${NORMAL}"; }
bold() { echo "${BOLD}$*${NORMAL}"; }

usage() {
    cat <<- EOF
$(echo -e "$(red "
                      _     _
   __ _ ___ ___  ___ | |__ (_)
  / _' / __/ __|/ _ \| '_ \| |
 | (_| \__ \__ \ (_) | |_) | |
  \__,_|___/___/\___/|_.__// |
                         |__/
")")

$(echo -e "$(blue "ASS")")essment $(echo -e "$(blue "OBJ")")ects:

Script that maps assessment test objects to respective input file names.

$(echo -e "$(green "USAGE")"):
       ${PROGNAME} [-h] [-n]

$(echo -e "$(green "OPTIONS")"):
       -h  Display this help information.
       -n  Dry run to show which files will be changed.

EOF
}

get_args() {
    while getopts ":hn" flag; do
        case "$flag" in
        h)
            usage
            exit 0
            ;;
        n)
            dry_run=1
            ;;
        \?)
            usage
            exit 1
            ;;
        esac
    done
}

get_input_files() {
    local files
    mapfile -t files < <(fd -e i . "$HOME/Documents/projects/bison/assessment/LWR/validation" --exec printf "%s\n" "{}";)
    local i

    for i in "${files[@]}"; do
        printf "%b\n" "$(blue "${i}")"
    done
}

main() {

    get_args "${ARGS[@]}"

    get_input_files
}

main "${ARGS[@]}"
